<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ModComponentチュートリアル by stmSantana</title>
    <style type="text/css">
h1 {
  font-size: 1.5em;
  font-weight: bold;
  border-style: solid;
  border-color: #666666;
  background-color: #333333;
  color: #cccccc;
  padding: 5pt 9pt 5pt 10pt;
  margin-top: 2em;
}

h2 {
  border-width: 2px 2px 2px 20px;
  border-style: solid;
  border-color: #666666;
  font-size: 1.3em;
  font-weight: bold;
  padding-left: 10px;
  margin-top: 2em;
}

h3 {
  font-size: 1.2em;
  border-bottom: 1px solid #999999;
  border-left: 10px solid #999999;
  border-radius: 0px;
  padding-left: 10px;
}

h4 {
  border-bottom: 0px none silver;
  text-decoration: underline overline;
  font-size: 1.2em;
}

em {
  font-weight: bold;
  font-size: 1.2em;
  color: #990000;
  font-style: normal;
}

pre {
  background-color: #d0deee;
}

</style></head>
  <body>
    <p></p>
    <h1>* 0.（初心者向け）ModComponentアイテム作成の段階的なチュートリアル</h1>
    <p><br>
    </p>
    <h1>* 1.前置き</h1>
    <p>（実は、ほとんどの必要な情報は既に <a href="https://github.com/ds5678/ModComponent/tree/master/docs/"
        target="_blank">https://github.com/ds5678/ModComponent/tree/master/docs/</a>
      にあります。<br>
      チュートリアルも <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Item-Mod-Tutorial.md"
        target="_blank">https://github.com/ds5678/ModComponent/blob/master/docs/Item-Mod-Tutorial.md</a>
      にあります。<br>
      しかしそれを読んだだけではまだ理解できない人のために、ここではもっとUnityビギナー向けの詳しい手順を書きます。）</p>
    <p>アイテムMODを作るのに必要なのは、素材となる3Dモデルや2D画像を用意してから、Unityで少し作業をするだけです。<br>
      しかし素材を作ることができる人であっても、今までUnityを使った事がなければ、凄く複雑で難しそうだと思って諦めてしまうかもしれません。<br>
      実際には、ModComponentを使えばUnityで行う操作はいつも同じ単純な手順なので、このガイドと同じように操作するだけで短時間で簡単にできま
      す。<br>
      <br>
      このチュートリアルは、3Dソフトウェア(Blender)とUnityのインストールをして、実際にモデルを作成してからゲームに導入するまでです。<br>
      <b> Blenderの操作は詳しく説明するときりがないので、今回のチュートリアルでは簡単なモデルしか作りません。</b><br>
      また、衣類機能や、音源機能は省略します。</p>
    <h1>* 2.前提</h1>
    <ul>
      <li>- Windowsユーザー （そうでない人は自分の環境に置き換えて読んで下さい）</li>
      <li>- Windowsとインターネットの基本的な知識、操作</li>
      <li>- 基本的な画像処理ソフトの操作</li>
    </ul>
    <h1>* 3.環境</h1>
    <ul>
      <li>Blender 2.93LTS&nbsp; （私の環境。他のバージョンでも問題ないが、エクスポート設定などが異なる場合があります。）</li>
      <li>Unity 2019.4.19 （TLDゲームのバージョンによる。このバージョン以外ではModが正常に動作しない場合があります。）</li>
    </ul>
    <h1>* 4.今回のサンプルModの構想</h1>
    <p></p>
    <h2>**4.1 GEAR（プレイヤーが所持するアイテム）</h2>
    <p><img src="Images/Tut4-1.png"></p>
    <ul>
      <li>今回のチュートリアルでは、単純な円筒形オブジェクトを使って「トイレットペーパー」を作成します。</li>
      <li>それを新聞紙のようにキャンプファイヤーのTinder(火口)として使えるアイテムとして設定します。</li>
      <li> また、新聞紙のようにHarvest(入手)して2個のTinder Plug（火口用の束）をクラフトできるようにします。</li>
      <li> 完成したアイテムは家の中に直接配置したり、ロッカーからスポーンするようにします。</li>
    </ul>
    <h2>**4.2 命名について</h2>
    <p></p>
    <h3>***4.2.1 プレハブ名</h3>
    <p>アイテムにはゲームで通常表示される名前とは別に、Unityで利用する為の<strong>プレハブ名</strong>が必要です。<br>
      これは「GEAR_」から始まる必要があるので、今回は<em>「GEAR_ToiletPaperA」</em>とい うプレハブ名にします。<br>
      <em> この「ToiletPaperA」という名前は重要なので忘れないでください。</em></p>
    <h3>***4.2.2 アセットバンドル名</h3>
    <p>Modアイテムは、3Dモデル、2Dアイコン、翻訳テキストなどのファイルをそれぞれ用意して、<br>
      それからUnityを用いてそれらを1つにまとめた<strong>アセットバンドル</strong>にします。<br>
      （複数のアイテムを作った場合でも１つのアセットバンドルになります。）<br>
      その<em>アセットバンドルのファイル名は重要ではありません</em>が、今回は<em>「toiletpapermod」</em>に します。</p>
    <h1>* 5.ワークフロー</h1>
    <p><img src="Images/Tut5-0_JPN.jpg" alt=""><br>
      <br>
      <br>
    </p>
    <h1>* 6.フォルダ構成</h1>
    <h2>6-1. フォルダの作成</h2>
    <p>今回は作業用フォルダとして<em>「D:\Mod_TP」</em>フォルダを使うと仮定して説明します。<br>
      実際には作業用のフォルダをあなたの好きな場所に任意の名前で作ることができます。<br>
      次に、そのサブフォルダに、各種作業用のフォルダを下記のように作成して下さい。</p>
    <ul>
      <li> -2Dと3Dのデータ作成用フォルダ「<strong>Working</strong>」</li>
      <li> -Unityプロジェクト用フォルダ「<strong>Unity</strong>」</li>
      <li> -アセットバンドル用フォルダ「<strong>Items_TP</strong>」</li>
    </ul>
    <p>これらのフォルダ名は<em>重要ではありません</em>。実際には任意の名前に変更できます。<br>
    </p>
    <p>さらに、「Items_TP」のサブフォルダとして「<em>auto-mapped</em>」「<em>blueprints</em>」 「<em>gear-spawns</em>」
      を作成して下さい。<br>
      これらの<em>3つのフォルダ名は重要なので変更できません</em>。</p>
    <p><img src="Images/Tut6-1.jpg" alt=""> </p>
    <h2>6-2.Unityテンプレートのダウンロード</h2>
    <ol>
      <li>以下のページに行きます。<a href="https://github.com/ds5678/ModComponent_TemplateProject"
          target="_blank"><br>
          https://github.com/ds5678/ModComponent_TemplateProject</a><strong><br>
          「Code」</strong>ボタンをクリックし、<strong>Download ZIP</strong>をクリックします。<br>
        <img src="Images/Tut6-2_1.jpg" alt="" style="width: 613px; height: 226px;"></li>
      <li>Zipファイルがダウンロードされたらそれを展開すると、その中にはModComponent_TemplateProject-mainフォルダが
        あり、さ らにその中にはUnityフォルダがあります。<br>
        <img src="Images/Tut6-2_2.jpg" alt=""></li>
      <li>そのUnityフォルダに入っている「Assets」と「ProjectSettings」を全て、自分の作業用フォルダ「D:\Mod_TP
        \Unity」 にコピーして下さい。<br>
        <img src="Images/Tut6-2_3.jpg" alt=""></li>
      <li>その後、Assetフォルダ以下の全てのサブフォルダから、「DELETE_This_」から始まる名前がついているファイルを検索して全て削除しま
        す。全部 で12個あるはずです。 </li>
    </ol>
    <h1>* 7. Blender</h1>
    <p><br>
    </p>
    <h2>**7.0 Blenderに慣れているユーザーへの説明</h2>
    <p>7-1から7-8までの手順はBlenderの解説なので、読む必要はありません。<br>
      普通にBlenderで作るだけですが、最初は単純なモデルでテストします。<br>
      UVとマテリアルとテクスチャも、簡単に済ませます。カメラやライトは必須ではありません。<br>
      BlenderファイルのままでもUnityに使用できますが、今回は必要なオブジェクトだけを<strong>FBX</strong>にエクスポートしま
      す。<br>
      <br>
      今回の作成したモデルは下記の通りです。</p>
    <p><img src="Images/Tut7-0.jpg" alt=""></p>
    <ul>
      <li>- Blenderファイル名: TP01.blend</li>
      <li>- マテリアル名: TP_Material</li>
      <li>- テクスチャ名: TP1_Texture (1024*1024)</li>
      <li>- FBX: TP01.fbx</li>
    </ul>
    <h2>**7.1 インストール</h2>
    <p>以下のページに行きます。<br>
      <a href="https://www.blender.org/download/lts/2-93/" target="_blank">https://www.blender.org/download/lts/2-93/</a><br>
      通常はページ上部のボタンを使ってWindowsストアかSteamから入手します。<br>
      それらを使いたくない場合はその下部にある<b>2.93.7</b>のリンクを使用してダウンロードします。<br>
      インストールして次のステップに進みます。</p>
    <h2>**7.2 準備</h2>
    <p>起動したら、中央にスプラッシュスクリーンというものが表示されていますが無視します。<br>
      周囲のなにもない領域をクリックして、スプラッシュスクリーンを閉じます。</p>
    <p><br>
    </p>
    <p>初期設定を</p>
    <p>【【【【編集中】】】】</p>
    <p><br>
    </p>
    <h2>**7.3 オブジェクト作成</h2>
    <p><br>
    </p>
    <p>【【【【編集中】】】】</p>
    <p><br>
    </p>
    <h2>**7.4 UV編集</h2>
    <p><br>
    </p>
    <p>【【【【編集中】】】】</p>
    <p><br>
    </p>
    <p>UVを編集したらUVレイアウトを<strong>PNG</strong>画像ファイルとしてエクスポートします。<br>
    </p>
    <h2>**7.5 テクスチャとマテリアルの作成</h2>
    <p>テクスチャは他のアイテムにあわせて1024x1024程度にします。<br>
      マテリアルの設定はUnityで行うので細かい設定は必要ありません。</p>
    <p>【【【【編集中】】】】</p>
    <h2>**7.6 テクスチャペイント</h2>
    <p>UVレイアウトを保存してから、ペイントソフトを使ってテクスチャの<strong>PNG</strong>を直接描くこともできます。<br>
      しかし、今回の例ではBlenderで簡単なペイントをします。</p>
    <p><br>
    </p>
    <p>【【【【編集中】】】】</p>
    <p><br>
    </p>
    <h2>**7.7 オブジェクトの微調整</h2>
    <p>アイテムの外見がもっと良くなるように編集しましょう。</p>
    <p><br>
    </p>
    <p>【【【【編集中】】】】</p>
    <p><br>
    </p>
    <p>実はBlenderとUnityではXYZの軸の方向が異なるので、オブジェクトをZ軸で90度回転する事をおすすめします。<br>
      最後に、オブジェクトの原点やサイズを適用します。</p>
    <h2>**7.8 FBXのエクスポート</h2>
    <p>BlenderファイルのままでもUnityで使用できますが、今回はFBXにエクスポートします。<br>
      ファイルメニュー＞エクスポート＞FBXを選択します。<br>
      下記のスクリーンショットのように設定します。</p>
    <p><br>
    </p>
    <h1>* 8. JSON</h1>
    <h2>**8.1 アイテムJSONファイルの作成</h2>
    <p><em>JSONファイル</em>はModアイテムがどのように動作するかの詳細を書くためのファ イルです。<br>
      アイテム1つにつき1つのアイテムJSONファイルが必要です。<br>
      アイテムのJSONは「auto-mapped」フォルダに保存します。<br>
      作成するModアイテムの名前に合わせ、テキストエディタでファイルを作成します。<br>
      拡張子は <strong>.txt</strong> ではなく<em style="color: #990000;"> </em><em>.json</em>
      に変更します。<br>
      例えば、アイテムの名前が「GEAR_ToiletPaperA」の場合、JSONファイルの名前は「GEAR_」を取り去って 「<em>toiletpapera.json</em>」
      にしなければいけません。<br>
      ファイル名は全て小文字にする必要があります。<br>
      実際に<strong> Mod_TP\Items_TP\auto-mapped\toiletpapera.json </strong>を作成して下
      さい。</p>
    <h3>***8.1.1 アイテムJSONテンプレートの導入</h3>
    <p>それぞれのJSONの説明は下記のページにあります。<br>
    </p>
    <ul>
      <li>- コンポーネント</li>
      <ul>
        <li>--<a href="https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Information-about-Components.md"
            target="_blank">
https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Information-about-Components.md</a></li>
      </ul>
      <li> - 挙動</li>
      <ul>
        <li> -- <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Information-about-Behaviours.md">https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Information-about-Behaviours.md</a></li>
      </ul>
    </ul>
    <p> 下記のページから必要なテンプレートを探して、自分のJSONファイル（toiletpapera.json）にコピーして使います。</p>
    <ul>
      <li> - <a href="https://github.com/ds5678/ModComponent/blob/master/docs/index.md">https://github.com/ds5678/ModComponent/blob/master/docs/index.md</a></li>
    </ul>
    <p> <br>
      今回は <strong>ModGenericComponent </strong>と <strong>ModTinderBehaviour </strong>を
      使います。<br>
      必要な部分をコピーしてから、次の項目を変更する必要があります。</p>
    <ul>
      <li> - <strong>"GAMEPLAY_SampleItem"</strong> を <strong>"GAMEPLAY_ToiletPaperA"</strong>に
        変更</li>
      <li> - <strong>"GAMEPLAY_SampleItemDescription"</strong> を<strong>
          "GAMEPLAY_ToiletPaperADescription" </strong>に変更</li>
      <li> - <strong>"GAMEPLAY_SampleItemAction"</strong> を<strong> "" </strong>に
        変更（２つのダブルクォーテーションの間にある文字を削除する）</li>
    </ul>
    <p><br>
    </p>
    <h3>***8.1.2 アイテムJSONの編集</h3>
    <p>toiletpapera.jsonファイルの内容を編集してください。<br>
      オブジェクトを追加したり削除したりする時は、カンマの位置に注意して下さい。<br>
      JSON内にはコメントが書けないので、もしテンプレートにコメント部分があったら削除して下さい。<br>
      <br>
      コード<br>
    </p>
    <pre><code>
{
    "ModGenericComponent": {
                                "DisplayNameLocalizationId" : "GAMEPLAY_ToiletPaperA",
                                "DescriptionLocalizatonId" : "GAMEPLAY_ToiletPaperADescription",
                                "InventoryActionLocalizationId" : "",
                                "WeightKG": 0.1,
                                "DaysToDecay" : 0,
                                "MaxHP" : 100,
                                "InitialCondition" : "Perfect",
                                "InventoryCategory" : "Auto",
                                "PickUpAudio" : "",
                                "PutBackAudio" : "",
                                "StowAudio" : "Play_InventoryStow",
                                "WornOutAudio" : "",
                                "InspectOnPickup" : true,
                                "InspectDistance" : 0.4,
                                "InspectAngles" : [0, 0, 0],
                                "InspectOffset" : [0, 0, 0],
                                "InspectScale" :  [1, 1, 1],
                                "NormalModel" : "",
                                "InspectModel" : ""
                            },
    "ModTinderBehaviour": {
                                "SuccessModifier" : 35,
                                "DurationOffset" : 0
                            },
    "ModHarvestableBehaviour": {
                                "Audio" : "",
                                "Minutes" : 5,
                                "YieldCounts" : [2],
                                "YieldNames" : ["GEAR_Tinder"],
                                "RequiredToolNames" : []
}
    </code></pre>
    <h2>**8.2 翻訳用JSONの作成</h2>
    <p>手順(6-2)でUnityテンプレートから作業用フォルダにコピーした「Mod_TP\Unity\Assets\Localization.json」
      を編集 します。<br>
      JSONエディタか、単なるテキストエディタで編集できます。<br>
      ローカライズJSONの説明は下記にあります。<br>
      <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Item-Configuration.md">
https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Item-Configuration.md</a></p>
    <h3>***8.2 Localization.jsonの編集</h3>
    <p>作成するModアイテムの名前に合わせてJSONの内容を編集します。<br>
      「<strong>GAMEPLAY_SampleItem</strong>」と「<strong>GAMEPLAY_SampleItemDescription</strong>」
      の名前を変更しなければいけません。<br>
      アイテムの名前が「GEAR_ToiletPaperA」の場合、「<em>GAMEPLAY_ToiletPaperA</em>」と 「<em>GAMEPLAY_ToiletPaperADescription</em>」
      に変更します。<br>
      <br>
      コード</p>
    <pre><code><br>{
    "GAMEPLAY_ToiletPaperA" : {
                            "English" : "Toilet Paper Roll",
                            "Japanese" : "トイレットペーパーのロール"
    },
    "GAMEPLAY_ToiletPaperADescription" : {
                            "English" : "For now, you can just burn it for a short time.",
                            "Japanese" : "今の所、ただ短時間燃やせるだけです。"
    }
}
<br></code></pre>
    <p> </p>
    <p><br>
    </p>
    <h1>* 9. Unity</h1>
    <h2>**9.1 インストール</h2>
    <p>下記のリンクから、まずUnity Hubをダウンロード、インストールします。<br>
      <a href="https://unity.com/download">https://unity.com/download</a><br>
    </p>
    <p> </p>
    <p>次に、Unityは最新版ではなくUnity 2019.4.19をインストールします。<br>
    </p>
    <p><img src="Images/Tut9-1_1.jpg" style="width: 50%;"></p>
    <p>インストールの時にLanguage pack（言語パック）を選択できます。</p>
    <p><img src="Images/Tut9-1_2.jpg" style="width: 50%;"></p>
    <h2>**9.2 テンプレートの使用</h2>
    <p>Unityのインストールが完了したら、Unity Hubを開きます。<br>
      <strong>Project</strong>の<strong>Open</strong>(開く)をクリックします。</p>
    <p><img src="Images/Tut9-2_1.jpg" alt="" style="width: 50%;"> <img src="Images/Tut9-2_2.jpg"
        alt="" style="width: 50%;"></p>
    <p> 前もってUnityテンプレートをコピーしておいた自分のUnityフォルダを開きます。</p>
    <p><img src="Images/Tut9-2_5.jpg" alt=""></p>
    <p><img src="Images/Tut9-2_6.jpg" alt="" style="width: 50%;"></p>
    <p></p>
    <p></p>
    <h2>**9.3 Unityエディタの開始</h2>
    <h3>***9.3.1 プロジェクト作成</h3>
    <p>Unity Hubに新しいプロジェクトができたので、それをクリックして開きます。<br>
      Unityエディタの新しいバージョンを確認するダイアログボックスが表示されるので、「Skip new
      version」ボタンを押してダウンロードをキャンセルします。<br>
      <br>
      Unityエディターのウィンドウが開きます。ウインドウ内はいくつかのビューに区切られています。<br>
      左上にHierarchy（ヒエラルキー）、中央上にScene（シーン）、左下にProject（プロジェクト）、右にInspector（インスペク
      ター）があります。</p>
    <p><img src="Images/Tut9-3.jpg" alt=""></p>
    <h3>***9.3.1 日本語化</h3>
    <p>言語パックをインストールしてあれば、Editメニュー＞Preference＞Languagesを開き、言語を選択できます。</p>
    <p><img src="Images/Tut9-3-1.jpg" alt=""></p>
    <h2>**9.4 アセット作成</h2>
    <h3>***9.4.1 FBXのインポート</h3>
    <p>BlenderからエクスポートしたFBXファイルを、Unityにインポートします。<br>
      プロジェクトビューの「Models」フォルダへ、<b>Windowsファイルエクスプローラー</b>から<strong>TP01.fbx</strong>ファ
      イルをドラッグします。</p>
    <p><img src="Images/Tut9-4-1_1.jpg" alt=""></p>
    <p> または、プロジェクトビューのModelsフォルダを選び、<strong>Assetメニュー</strong>か<strong>右クリック</strong>か
      ら、「新しいアセットをインポート」して、TP01.fbxを選びます。</p>
    <p><img src="Images/Tut9-4-1_1b.jpg" alt=""></p>
    <p>Modelsフォルダの中にTP01がインポートされてアイコンが表示されます。</p>
    <p><img src="Images/Tut9-4-1_2.jpg" alt=""></p>
    <h3>***9.4.2 テクスチャのインポート</h3>
    <p>Blenderで使ったテクスチャー用のPNGファイルをUnityにインポートします。<br>
      プロジェクトビューの「Textures」フォルダへ、<strong>Windowsファイルエクスプローラー</strong>から<strong>TP1_Texture.png</strong>ファ
      イルをドラッグします。<br>
      または、プロジェクトビューのModelsフォルダを選び、Assetメニューか右クリックから、「新しいアセットをインポート」します。</p>
    <p><img src="Images/Tut9-4-2.jpg" alt=""></p>
    <h3>***9.4.3 マテリアル</h3>
    <h4>****9.4.3.1 マテリアルを抽出</h4>
    <p>インポートされたモデル「TP01」には、マテリアルが埋め込まれています。それを抽出します。<br>
      プロジェクトビューのModelsフォルダを選ぶと、その右側にフォルダの中身が表示されます。<br>
      そこからTP01を選択してから、インスペクタビューの「Extract Materials」（マテリアルを抽出）ボタンをクリックします。</p>
    <p><img src="Images/Tut9-4-3_1.jpg" alt=""></p>
    <p> 抽出先フォルダを選択するウィンドウが表示されたら「Materials」フォルダを選びます。</p>
    <p><img src="Images/Tut9-4-3-1_2.jpg" alt=""></p>
    <h4>****9.4.3.2 マテリアルの設定</h4>
    <p>プロジェクトビューのMaterialsフォルダに抽出された「<strong>TP_Material</strong>」を選びます。<br>
      インスペクタビューで下記のように設定して下さい。</p>
    <p> <img src="Images/Tut9-4-3_2.jpg" alt=""><br>
      <strong>Albedo</strong>（アルベド）にはテクスチャに<strong>TP1_Texture</strong>が設定されているは
      ずです。<br>
      アルベドのカラーは白、MetallicとSmoothnessの値は0です。</p>
    <h3>***9.4.4 保存</h3>
    <p>ここで一度、保存しておきましょう。</p>
    <p>File＞Save で、 全てを保存します。</p>
    <p><img src="Images/Tut9-5.jpg" alt=""></p>
    <h2>**9.5 プレハブ</h2>
    <h3>***9.5.1 ゲームオブジェクトの作成</h3>
    <p>Asset/ModelsにインポートされたファイルTP01をHierarchyビューにドラッグします。</p>
    <p> HierarchyにゲームオブジェクトTP01のアイコンが表示され、Sceneにモデルが表示されます。</p>
    <p><img src="Images/Tut9-5-1.jpg" alt=""></p>
    <p></p>
    <h3>***9.5.2 プレハブの作成</h3>
    <p>HierarchyのTP01アイコンをAsset/Prefabsにドラッグします。<br>
      「Original Prefab」（原型プレハブ）か「Prefab
      Variant」（プレハブバリアント）かを選ぶ質問が表示されるので、「プレハブバリアント」ボタンを選択します。</p>
    <p><img src="Images/Tut9-5-2_1.jpg" alt=""></p>
    <p> HierarchyのTP01の名前が青い文字になります。そして、Prefabsフォルダの中にTP01が表示されます。<br>
      それから、Prefabsの中のTP01の名前を事前に決めていた通りに「<em>GEAR_ToiletPaperA</em>」に変更します。<br>
      この<em>プレハブ名</em>はModComponentにとって<em>重要です</em>。</p>
    <p><img src="Images/Tut9-5-2_2.jpg" alt=""></p>
    <h3>***9.5.3 プレハブの編集</h3>
    <p>Prefabsの中のGEAR_ToiletPaperAを選択してからInspectorの「<strong>Open Prefab</strong>」
      ボタンをクリックします。<br>
      または、GEAR_ToiletPaperAを<strong>ダブルクリック</strong>します。<br>
      または、HierarchyのTP01の名前の右にある「<strong>＞</strong>」ボタンをクリックします。<br>
      するとプレハブが開かれてInspectorで編集できるようになります。</p>
    <p><img src="Images/Tut9-5-3.jpg" alt=""></p>
    <h3>***9.5.4 コライダー コンポーネントの追加</h3>
    <p>GEAR_ToiletPaperAのInspectorの「Add Component」（コンポーネントの追加）ボタンをクリックします。</p>
    <p></p>
    <p> Physics＞Box Collider（物理＞ボックスコライダー）を選びます。</p>
    <p><img src="Images/Tut9-5-4_1.jpg" alt=""></p>
    <p> シーンの中にあるオブジェクトが箱型の緑色の線で包まれます。<br>
      コライダーは通常はぴったりのサイズのはずですが、もし大きさを編集したいなら「Edit
      Collider」ボタンをオンにしてから、箱の面に表示された緑色の点をドラッグします。</p>
    <p><img src="Images/Tut9-5-4_2.jpg" alt=""></p>
    <h3>***9.5.5 プレハブの編集を終了する</h3>
    <p>HierarchyのGEAR_ToiletPaperAの名前の左側にある「＜」ボタンをクリックします。</p>
    <p><img src="Images/Tut9-5-5.jpg" alt=""></p>
    <h2>**9.6 インベントリ用のアイコン</h2>
    <h3>***9.6.1 アイコン名の変更</h3>
    <p>ProjectビューのAssets/<strong>InventoryGridIcons</strong>フォルダを選択します。<br>
      フォルダの中にはテンプレートとして「ico_GearItem__SampleItem.png」という画像ファイルが入っています。（GearItemに
      続く文字は<em>2個のアンダースコア</em>です）<br>
      <em> このファイル名は重要です。<br>
      </em> 自分のModアイテムのプレハブ名に基づいた名前に変更する必要があります。<br>
      今回の例では、プレハブ名が「GEAR_ToiletPaperA」なので、アイコン名を「<em>ico_GearItem__ToiletPaperA.png</em>」
      に変更します。<br>
      GearItemの次の文字はアンダースコアが2つ連続している必要があります。</p>
    <p><img src="Images/Tut9-6-1.jpg" alt=""></p>
    <p> インベントリアイコンについてのもっと詳しい説明は以下のページにあります。<br>
      <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Item-Configuration.md">https://github.com/ds5678/ModComponent/blob/master/docs/Basic-Item-Configuration.md</a><br>
      この画像は512*512ピクセルのサイズでなければなりません。</p>
    <h3>***9.6.2 アイコン画像の編集</h3>
    <p>テンプレートのアイコン画像には何も描かれていませんので、自分自身で編集してください。<br>
      画像ファイルを<strong>Windowsファイルエクスプローラー</strong>で表示したいなら、Projectビューの <strong>
        ico_GearItem__ToiletPaperA.png</strong>を<strong>右クリック</strong>してか ら「Show
      in Explorer」（エクスプローラーで表示）を選んでください。</p>
    <p><img src="Images/Tut9-6-2.jpg" alt=""> </p>
    <p>最も簡単な方法は、BlenderやUnityのスクリーンショットをとって、2D画像編集ソフトでアイテムの画像をトリミングする事でしょう。</p>
    <p>Unityでスクリーンショットを撮影する手順のヒントは下記の通りです。</p>
    <p><img src="Images/Tut9-6-2_2.jpg" alt=""></p>
    <ul>
      <li>（１）ProjectビューのPrefabsフォルダを選びます</li>
      <li>（２）アイコンをダブルクリックします。</li>
      <li>（３）Hierarchyビューの内側をクリックします。</li>
      <li> （４）<strong>ハンドツール</strong>を使って<strong>シーンビュー</strong>内を<strong>左マウスボタ
          ンドラッグ</strong>すると、視点を移動できます。</li>
      <li> シーンビュー内を<strong>右マウスボタンドラッグ</strong>すると、視点を回転できます。</li>
      <li> さらに、シーンビュー内を右マウスボタンを押したままの時に、キーボードの<strong>WASDQEキー</strong>を使うと、視点を
        FPSゲームのように移動できます。</li>
      <li> （５）シーン内のアイテムの表示サイズや角度が気に入ったら、<strong>グリッド表示ボタン</strong>をオフにしてスクリーンショッ
        トを撮ってください。</li>
      <li>2D画像編集ソフトで ico_GearItem__ToiletPaperA.png を開き、スクリーンショットをペーストします。<br>
        背景を選択して削除して透明にしてください。（PNGのアルファチャンネル）</li>
    </ul>
    <p>画像が正しく保存されれば、<strong>InventoryGridIcons</strong>フォルダの中の「<strong>ico_GearItem__ToiletPaperA.png</strong>」
      が更新されます。</p>
    <p><img src="Images/Tut9-6-2_3.jpg" alt=""></p>
    <p></p>
    <h2>**9.7 アセットバンドル</h2>
    <h3>***9.7.1 アセットバンドルの名前</h3>
    <p>今回の例では、<em>アセットバンドルの名前</em>は「<em>toiletpapermod</em>」にするつもりです。<br>
      Projectビューで「Assets」フォルダを選択してから、その中にある「Localization」ファイルアイコンをクリックします。<br>
      InterloperのAssetBundleのドロップダウンリストボックスで「New」を選びます。</p>
    <p><img src="Images/Tut9-7-1_1.jpg" alt=""></p>
    <p> 新しい名前として「toiletpapermod」と入力します。</p>
    <p><img src="Images/Tut9-7-1_2.jpg" alt=""></p>
    <p></p>
    <p>同じようにして、「InventoryGridIcons」フォルダと「Prefabs」フォルダのアイコンの２つを選んで、そららの
      AssetBundleの名前も「toiletpapermod」 にします。<br>
      注意：それらのフォルダに入っているファイルのAssetBundleの名前を変更する必要はありません。</p>
    <h3>***9.7.2 アセットバンドルのエクスポート</h3>
    <p>これがUnityでの最後の作業です。<br>
      Assets（アセット）メニューの「Build AssetBundles」コマンドを選びます。</p>
    <p><img src="Images/Tut9-7-2_1.jpg" alt=""></p>
    <p>これによって「Mod_TP\Unity\<strong>AssetBundles</strong>」フォルダが作成されて、アセットバンドルファイル
      がその中にエクスポートされます。<br>
      AssetBundlesフォルダの中には複数のファイルが保存されますが、「<em>toiletpapermod.unity3d</em>」という名前
      の１つのファイルだけが ModComponentに必要です。</p>
    <h1>* 10.ModComponent</h1>
    <p>ModComponentファイルはZIPファイルをリネームして拡張子を「.modcomponent」に変更しただけのファイルです。</p>
    <h2>**10.1 ファイルを正しいフォルダにコピーする</h2>
    <p>必要なファイルを「Items_TP」フォルダに集めて、最初にZIPを作る必要があります。<br>
      Mod_TP\Unity\AssetBundlesフォルダにエクスポートされた<strong>toiletpapermod.unity3d</strong>を、
      Mod_TP \Items_TP\<strong>auto-mapped</strong>フォルダにコピーします。<br>
      この時、auto-mappedフォルダには（手順8.1）によって既に<strong>toiletpapera.json</strong>が保存されて
      いるはずです。</p>
    <h2>**10.2 ZIPファイルの作成</h2>
    <p>今回の例では、ModComponentファイルを簡単に作成するツール「ModComponent Extractor」を使います。<br>
      次のステップ(10.3)に進んで下さい。<br>
      <br>
      しかし、<strong>もし自分でZIPファイルを作成したければ</strong>、以下の手順に従って下さい。</p>
    <p>「Items_TP」フォルダの中の3つのフォルダを、「Items_TP.zip」という名前で圧縮します。</p>
    <p><img src="Images/Tut10-2.jpg" alt=""></p>
    <p> 注意点として、Items_TP.zipの中にはItems_TPフォルダは入れてはいけません。「auto-mapped」「blueprints」
      「gear-spawns」の3つのフォルダが直接ZIPの中に置かれていなければいけません。</p>
    <p> ZIPファイルが作られたら、その拡張子を<strong>.zip</strong>から<strong>.modcomponent</strong>に
      変更します。</p>
    <h2>**10.3 ModComponent Extractorを使用する</h2>
    <p>ModComponentExtractor is an application for making and extracting
      '.modcomponent' files used by ModComponent.<br>
      （ModComponentExtractorは、ModComponentが使用する<b>「.modcomponent」ファイル</b>を作成および抽
      出するためのア プリケーションです。）</p>
    <h3>***10.3.1 ModComponent Extractorのダウンロード</h3>
    <p>下記のリンクを開き、最新のリリースをダウンロードします。（WindowsユーザーはModComponentExtractor_Win64.zipが
      必要）<br>
      <a href="https://github.com/ds5678/ModComponentExtractor">https://github.com/ds5678/ModComponentExtractor</a><br>
      ダウンロードされたzipファイルの中から<strong>ModComponentExtractor.exe</strong>を<strong>Mod_TP</strong>フォ
      ルダに抽出してください。</p>
    <h3>***10.3.2 ModComponent Extractorを使用して.modcomponentファイルを作成する</h3>
    <p>Windowsファイルエクスプローラーで、Mod_TPフォルダ内の<strong>Items_TP</strong>アイコンを<strong>ModComponentExtractor.exe</strong>に
      ド ラッグしてください。</p>
    <p><img src="Images/Tut10-3-2.jpg" alt=""> </p>
    <p>ModComponentExtractorの黒いウインドウに白い文字で「Succeeded」と表示されていれば成功です。<br>
      黒いウインドウを閉じて下さい。</p>
    <p> Mod_TPフォルダの中に、<em>Items_TP.modcomponent</em>という名前のファイルがあるはずです。</p>
    <p><em> それが完成されたアイテムMODです。</em></p>
    <h1>* 11.Modのインストール</h1>
    <h2>**11.1 準備</h2>
    <p>自分でアイテムModを作りたいと考えているあなたは、既に他のTLDのModを使用しているはずです。<br>
      だからここでは基本的なModのインストールについて詳しくは説明しません。<br>
      基本的なModのインストールの説明は、<a href="https://xpazeman.com/tld-mod-list/">https://xpazeman.com/tld-mod-list/</a>
      にあります。</p>
    <h3>***11.1.1 必須MOD</h3>
    <p>以下のMODを全てインストールして、エラーなしで動作するようにしてください。<br>
      -ModComponentと、それの依存関係
      （ModSettings,GearSpawner,LocalizationUtilities,CraftingRevisions)<br>
      -DeveloperConsole<br>
      -Coordinates Grabber</p>
    <h3>***11.1.2 推奨MOD</h3>
    <p>-Placing Anywhere（アイテムを配置するため）<br>
      -PlaceFromInventory（アイテムの配置を簡単にするため）<br>
      -SaveAnywhere（いつでもセーブとロードをできるように）<br>
      -他のModderのアイテムMod（それらとスポーン位置を重複させたくない場合）</p>
    <h2>**11.2 自分のMODのインストール</h2>
    <p>The Long Darkのゲームプログラムが終了している事を確認します。<br>
      他のModと同じように、自分のMod(Items_TP.modcomponent)をTheLongDark\Modsフォルダにコピーします。</p>
    <h1>* 12. MODのテスト</h1>
    <h2>**12.1 MelonLoaderでのチェック</h2>
    <p>The Long Darkを起動します。<br>
      MelonLoaderのウィンドウで、エラーが無いかどうかを見て下さい。<br>
      ゲームのウィンドウでMelonLoaderが隠れた時は、<strong>Alt+Tab</strong>キーなどを使ってウィンドウを最前面にしてくだ
      さい。<br>
      <br>
      もしエラーがあれば、JSONやUnityでの作業に間違いがあります。<br>
      フォルダやファイルの名前やそれらの階層構造、プレハブなどの名前の間違いやアルファベットの大文字小文字やミスタイプに注意して下さい。<br>
      間違いを見つけてからアセットバンドルとModComponentを作り直し、修正されたMODを再インストールしてください。</p>
    <ul>
      <li>エラーのサンプル。赤い文字！<br>
        <img src="Images/Tut12-1.jpg" alt=""></li>
    </ul>
    <h2>**12.2 コンソールコマンドでのチェック</h2>
    <p>エラーがなければ、ゲームを起動してからデベロッパーコンソールを開きます。（<strong>F1</strong> キー）<br>
      「add toil」のように名前を途中まで入力したら、Tabキーでアイテム名の残りの文字が「オートコンプリート」されます。<br>
      それからEnterキーでコマンドを実行します。インベントリにアイテムが追加されていれば成功です。</p>
    <p><b> もしアイテム名をオートコンプリートできない場合、Modに何かのエラーがあります。</b></p>
    <h2>**12.3 アイテムの保存チェック</h2>
    <p>アイテムを正常に操作できるかと保存できるかどうかをチェックします。</p>
    <ul>
      <li>インベントリからMODアイテムを地面に落としてください。地面に正しいサイズでそれが置かれていれば<em>成功</em>です。</li>
      <li>次に、地面に置いてあるそのアイテムを、左クリックで拾い上げたり、右クリックして移動してみて下さい。</li>
      <li>最後に、地面にアイテムを置いてから、コンソールコマンド「save」を使って、それからゲームを終了してください。</li>
      <li>ゲームを再起動してからセーブデータをロードして、地面の上にあるアイテムを拾い上げることができれば<em>成功</em>です。</li>
    </ul>
    <p><br>
    </p>
    <ul>
      <li>地面に落ちているアイテムを触れない、拾えない、カーソルポイントに名前が表示されない場合、アイテムにバグがあります。</li>
      <ul>
        <li>Unityでプレハブにボックスコライダーが設定されていないかもしれません。</li>
        <li>コライダーに問題がない場合は、別の原因かもしれません。</li>
        <li>その場合、Unityのプレハブ編集画面のInspectorで「<b>レイヤー17</b>」を作成して選択すると解決する可能性があります。</li>
        <li>（しかし、私のチュートリアルでは、レイヤーを変更しなくても問題が発生しませんでした）</li>
      </ul>
    </ul>
    <h2>**12.4 アイテムの機能チェック</h2>
    <p>JSON（toiletpapera.json）で設定されたアイテムの機能が正常に働くかチェックします。</p>
    <p><img src="Images/Tut12-4.jpg" alt=""></p>
    <ul>
      <li>ModTinderBehaviourのテスト</li>
      <ul>
        <li>アイテムがTinder（火口）として利用できるかをチェックします。</li>
      </ul>
      <li>ModHarvestableBehaviourのテスト</li>
      <ul>
        <li>アイテムがHarvest（入手）できるかをチェックします。</li>
      </ul>
    </ul>
    <ul>
      <ul>
      </ul>
    </ul>
    <h1>* 13.gear-spawnsフォルダ</h1>
    <h2>**13.0 説明</h2>
    <p>MODのテストが全て終わったら、ゲームプレイ中にプレイヤーがアイテムを入手できるようにする設定をします。<br>
      次の2種類があります。<br>
    </p>
    <ul>
      <li> -Loot Table</li>
      <ul>
        <li>--バックパックやロッカーのような容器から入手できるアイテムの種類と確率を設定します。</li>
      </ul>
      <li> -Item Spawn</li>
      <ul>
        <li>--床の上や樹の下などにランダムで出現するアイテムの位置を指定して、位置と確率を設定します。</li>
      </ul>
    </ul>
    <p> <br>
      下記のページに詳しい情報があります。<br>
      <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Gear-Spawns.md"
        target="_blank">https://github.com/ds5678/ModComponent/blob/master/docs/Gear-Spawns.md</a><br>
      <br>
      必須MODのCoordinates Grabberを使うので、その使用方法をMODの配布ページで確認してください。<br>
      <a href="https://github.com/ds5678/Coordinates-Grabber" target="_blank">
        https://github.com/ds5678/Coordinates-Grabber</a></p>
    <h2>**13.1 TXTファイルの作成</h2>
    <p>Mod_TP\Items_TP\<strong>gear-spawns</strong>フォルダの中にテキストファイルを作る必要があります。<br>
      <em>ファイルの個数やファイル名は重要ではありません。</em><br>
      今回の例では、以下の2つのファイルを作成します。</p>
    <ul>
      <li> - <em>TP-LootTables.txt</em></li>
      <li> - <em>TP-Scenes.txt</em></li>
    </ul>
    <p> 内容は空のままでかまいませんので、これらの2つのファイルを実際にそこに保存して下さい。</p>
    <h2>**13.2 Loot Tableの編集</h2>
    <p><strong>TP-LootTables.txt</strong>をテキストエディタで編集して下さい。<br>
      下記URLに必要な情報があります。<br>
      <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Loot-Tables.md">https://github.com/ds5678/ModComponent/blob/master/docs/Loot-Tables.md</a></p>
    <p>下記はTP-LootTables.txtのサンプルです。<br>
      これは<strong>浴室のキャビネット</strong>と<strong>釣り小屋の引き出し</strong>からトイレットペーパーが発見される確
      率を設定します。<br>
      手順13.0の説明に従って「GEAR_ToiletPaperA」の名前を省略可能なので「ToiletPaperA」と記述しています。</p>
    <p>コード </p>
    <blockquote>
      <pre><code>
loottable=BathroomCabinet
item=ToiletPaperA w=10
loottable=FishingDrawer
item=ToiletPaperA w=3

</code></pre></blockquote>
    <p><strong>オプションとして：</strong>下記のURLにテンプレートがあります。<br>
      全ての行をコピーして自分のTXTファイルに貼り付けて使えます。<br>
      <a href="https://github.com/stmSantana/ModComponentDocs/blob/main/Samples/template-LootTables.txt"
        target="_blank">https://github.com/stmSantana/ModComponentDocs/blob/main/Samples/template-LootTables.txt</a><br>
      ほとんどの容器の名前は&lt;LootTableName&gt;を見れば理解できるはずです。<br>
      しかしCargoから始まる名前はわかりにくいかもしれません。それらはTimberwolf Mountainに散在している大きな箱です。<br>
      ゲーム中にCoordinates Grabberをloot
      tableモードで使用すれば、マウスカーソルの下にある容器の&lt;LootTableName&gt;を調べられます。<br>
    </p>
    <p><br>
      <code></code></p>
    <h2>**13.3 Item Spawnの編集</h2>
    <p>TP-Scenes.txtをテキストエディタで編集して下さい。<br>
      下記URLに必要な情報があります。<br>
      <a href="https://github.com/ds5678/ModComponent/blob/master/docs/Scenes.md"
        target="_blank">https://github.com/ds5678/ModComponent/blob/master/docs/Scenes.md</a></p>
    <p><a href="https://github.com/ds5678/ModComponent/blob/master/docs/Scenes.md"
        target="_blank"></a>下記はTP-Scenes.txtのサンプルです。<br>
      これは<strong>キャンプオフィス</strong>にトイレットペーパーがスポーンする確率を設定します。（ファイルキャビネットの上に2箇所。確率
      は50%と100%。）<br>
      <br>
      コード </p>
    <blockquote>
      <pre><code>
scene=CampOffice
item=GEAR_ToiletPaperA p=4.6833,1.8265,-3.3410 r=0.0000,119.9167,0.0000 c=50
item=GEAR_ToiletPaperA p=4.6700,1.8265,-3.1150 r=0.0000,55.7875,0.0000 c=100

</code></pre> </blockquote>
    <p><strong>オプションとして：</strong>下記のURLにテンプレートがあります。<br>
      全ての行をコピーして自分のTXTファイルに貼り付けて使えます。<br>
      <a href="https://github.com/stmSantana/ModComponentDocs/blob/main/Samples/template-Scenes.txt"
        target="_blank">https://github.com/stmSantana/ModComponentDocs/blob/main/Samples/template-Scenes.txt</a><br>
      ほとんどの主要な「シーン」の名前はコメント行の&lt;SceneName&gt;と付属説明を見れば理解できるはずです。<br>
      例えば沿岸ハイウェイの屋外のシーン名は「CoastalRegion」です。<br>
      グレイマザーの家の屋内のシーン名は「GreyMothersHouseA」です。<br>
      しかし一般的な洞窟やキャビンのA、B、Cのような違いは、名前を見てもわからないでしょう。<br>
      Coordinates Grabberでそれを調べる必要があります。<br>
      <br>
      ゲーム中に自分のMODのアイテム（ToiletPaperA）をスポーンさせたい場所に、それを配置して下さい。<br>
      Coordinates
      GrabberをSceneモードで使用すれば、マウスカーソルの下にあるアイテムの&lt;SceneName&gt;を調べられます。<br>
      次に、Sceneモード中に［<strong>右 Ctrl</strong>］キーを押せば、マウスカーソルの下にあるアイテムの完全なアイテムスポーン定
      義がクリップボードに<strong>コピー</strong>されます。それをテキストエディタでTP- Scenes.txtの正しいScene位置に「<strong>貼
        り付け</strong>」して下さい。<br>
    </p>
    <h1>* 14.MODの再作成</h1>
    <p>2つのテキストファイルを保存したら、もう一度ModComponentを作ります。（手順10.3.2.）を参照。<br>
      それから、再び完成したMODを、もう一度インストールします。（手順11.）を参照。<br>
      それから、もう一度MODのテストをします。（手順12.）を参照。</p>
    <p>新規のゲームを開始します。ミステリーレイクのキャンプ・オフィスに行きます。<br>
      （手順13.3で、そこにスポーンを設定しました）<br>
      エラーが発生しないで、キャンプ・オフィスのファイルキャビネットの上にトイレットペーパーが1つ以上スポーンしていれば<em>成功</em>です。</p>
    <h1>* 15.完成</h1>
    <p><em>おめでとう！これでアイテムMODが完成しました。</em><br>
      完成した「Items_TP.modcomponent」を公開できます。</p>
    <h1>* 16.追加のチュートリアル課題</h1>
    <p>別の新しいアイテム（半分使用されていて細くなったトイレットペーパーロール）として「ToiletPaperB」という新しいオブジェクトを
      Blenderで作って、自分のMODに追加してみてください。<br>
      この場合、１つのアセットバンドルファイルに2つのプレハブが入ることになります。<br>
      アイテムJSONのtoiletpaperb.jsonを新たに作る必要があります。<br>
      翻訳JSONであるLocalization.jsonのファイルは1つだけのままです。その中に2つ目のアイテムの設定を追加します。<br>
      gear-spawnsのテキストファイルの数は増やしても大丈夫ですが、今回の例では既存のファイルに何行か追加するだけにします。</p>
    <p>(終わり)</p>
  </body>
</html>
